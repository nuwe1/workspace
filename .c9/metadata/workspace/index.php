{"filter":false,"title":"index.php","tooltip":"/index.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Q"],"id":1221}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["o"],"id":1222},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["s"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["f"],"id":1223}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["x"],"id":1224}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["E"],"id":1225},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["l"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"],"id":1226},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["j"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["W"],"id":1227},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["F"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["T"],"id":1228},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["E"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["x"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["k"],"id":1229},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["D"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["s"],"id":1230},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["r"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["j"],"id":1231},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["v"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["L"],"id":1232},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["D"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"],"id":1233},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["F"],"id":1234},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["v"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["9"],"id":1235},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["C"],"id":1236},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["G"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["N"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["f"],"id":1237}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["D"],"id":1238},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["W"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["U"],"id":1239}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["s"],"id":1240},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["E"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["O"],"id":1241},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["7"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["g"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["C"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["l"],"id":1242},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"],"id":1243},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["X"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["t"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["o"],"id":1244},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["B"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["g"],"id":1245},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["9"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["o"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"],"id":1246}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["e"],"id":1247}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["d"],"id":1248},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["b"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["8"],"id":1249},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["i"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Y"],"id":1250}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["o"],"id":1251},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"],"id":1252},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["6"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"],"id":1253},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["C"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["9"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["c"],"id":1254}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["5"],"id":1255},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["x"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["2"],"id":1256},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["s"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["F"],"id":1257},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["k"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["A"],"id":1258},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["4"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["x"],"id":1259}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["G"],"id":1260}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["7"],"id":1261}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["q"],"id":1262}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["G"],"id":1263}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["f"],"id":1264}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["F"],"id":1265}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["O"],"id":1266}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["J"],"id":1267}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["K"],"id":1268}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["1"],"id":1269}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["l"],"id":1270}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["v"],"id":1271}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["9"],"id":1272}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["f"],"id":1273}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["m"],"id":1274}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["s"],"id":1275}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["H"],"id":1276},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["a"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["X"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["r"],"id":1277},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Y"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["7"],"id":1278},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["1"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["C"],"id":1279}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["y"],"id":1280},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["l"]},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Y"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["q"],"id":1281},{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["j"]}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["U"],"id":1282}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["3"],"id":1283}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["s"],"id":1284}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Q"],"id":1285}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"],"id":1286}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["D"],"id":1287}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["Z"],"id":1288}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":17},"action":"remove","lines":["D"],"id":1289}],[{"start":{"row":24,"column":16},"end":{"row":24,"column":193},"action":"insert","lines":["EAARFZAgZCvAmcBAHCScZAY75ob3gHlpKAwGRizbBj5xmhLEwqep1lNVtrb7n6j53XjbyKwxT79Mypvt0LjlWjI0TfhQIJ2QnqrM9eRfABNybxQOZB6ZB9ZCTCVeDzdhScfLlxDC3qgX2rysyc4WofIADAPIAsWub3hnWS3X93fngZDZD"],"id":1290}],[{"start":{"row":24,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["$accessToken = \"EAARFZAgZCvAmcBAHCScZAY75ob3gHlpKAwGRizbBj5xmhLEwqep1lNVtrb7n6j53XjbyKwxT79Mypvt0LjlWjI0TfhQIJ2QnqrM9eRfABNybxQOZB6ZB9ZCTCVeDzdhScfLlxDC3qgX2rysyc4WofIADAPIAsWub3hnWS3X93fngZDZD\";",""],"id":1291}],[{"start":{"row":9,"column":0},"end":{"row":10,"column":0},"action":"insert","lines":["$accessToken = \"EAARFZAgZCvAmcBAHCScZAY75ob3gHlpKAwGRizbBj5xmhLEwqep1lNVtrb7n6j53XjbyKwxT79Mypvt0LjlWjI0TfhQIJ2QnqrM9eRfABNybxQOZB6ZB9ZCTCVeDzdhScfLlxDC3qgX2rysyc4WofIADAPIAsWub3hnWS3X93fngZDZD\";",""],"id":1292}],[{"start":{"row":3,"column":1},"end":{"row":3,"column":33},"action":"remove","lines":["print_r($_GET[\"hub_challenge\"]);"],"id":1293}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":32},"action":"insert","lines":["print_r($_GET[\"hub_challenge\"]);"],"id":1294}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":[" "],"id":1295}],[{"start":{"row":2,"column":0},"end":{"row":3,"column":1},"action":"remove","lines":[""," "],"id":1296}],[{"start":{"row":24,"column":69},"end":{"row":24,"column":70},"action":"remove","lines":["s"],"id":1297}],[{"start":{"row":24,"column":68},"end":{"row":24,"column":69},"action":"remove","lines":["s"],"id":1298}],[{"start":{"row":24,"column":67},"end":{"row":24,"column":68},"action":"remove","lines":["e"],"id":1299}],[{"start":{"row":24,"column":66},"end":{"row":24,"column":67},"action":"remove","lines":["c"],"id":1300}],[{"start":{"row":24,"column":65},"end":{"row":24,"column":66},"action":"remove","lines":["c"],"id":1301}],[{"start":{"row":24,"column":64},"end":{"row":24,"column":65},"action":"remove","lines":["a"],"id":1302}],[{"start":{"row":8,"column":6},"end":{"row":8,"column":7},"action":"remove","lines":["s"],"id":1303}],[{"start":{"row":8,"column":5},"end":{"row":8,"column":6},"action":"remove","lines":["s"],"id":1304}],[{"start":{"row":8,"column":4},"end":{"row":8,"column":5},"action":"remove","lines":["e"],"id":1305}],[{"start":{"row":8,"column":3},"end":{"row":8,"column":4},"action":"remove","lines":["c"],"id":1306}],[{"start":{"row":8,"column":2},"end":{"row":8,"column":3},"action":"remove","lines":["c"],"id":1307}],[{"start":{"row":8,"column":1},"end":{"row":8,"column":2},"action":"remove","lines":["a"],"id":1308}],[{"start":{"row":19,"column":54},"end":{"row":19,"column":55},"action":"remove","lines":["'"],"id":1309}],[{"start":{"row":19,"column":54},"end":{"row":19,"column":55},"action":"insert","lines":["\""],"id":1310}],[{"start":{"row":19,"column":21},"end":{"row":19,"column":22},"action":"remove","lines":["'"],"id":1311}],[{"start":{"row":19,"column":21},"end":{"row":19,"column":22},"action":"insert","lines":["\""],"id":1312}],[{"start":{"row":2,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["","file_put_contents(\"fb.txt\",file_get_contents(\"php://input\"));","  $fb = file_get_contents(\"fb.txt\");","  $fb = json_decode($fb);","  //$rid is the recipient id and here we are getting the sender id from the message json body","$rid = $fb->entry[0]->messaging[0]->sender->id;","$Token = \"EAARFZAgZCvAmcBAHCScZAY75ob3gHlpKAwGRizbBj5xmhLEwqep1lNVtrb7n6j53XjbyKwxT79Mypvt0LjlWjI0TfhQIJ2QnqrM9eRfABNybxQOZB6ZB9ZCTCVeDzdhScfLlxDC3qgX2rysyc4WofIADAPIAsWub3hnWS3X93fngZDZD\";","","$data = array(","    'recipient' => array('id'=>\"$rid\"),","    'message' => array('text'=>\"Nice to meet you\")","    );","","$options = array(","    'http'=> array(","        'method'  => 'POST',","        'content' => json_encode($data),","        'header'  => \"Content-Type: application/json\\n\"","        )","    ","    );","$context = stream_context_create($options);","file_get_contents(\"https://graph.facebook.com/app?access_token=$Token\", false ,$context);",""],"id":1317}],[{"start":{"row":2,"column":32},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":1318}],[{"start":{"row":3,"column":0},"end":{"row":25,"column":0},"action":"insert","lines":["// handle bot's anwser","$input = json_decode(file_get_contents('php://input'), true);","","$senderId = $input['entry'][0]['messaging'][0]['sender']['id'];","$messageText = $input['entry'][0]['messaging'][0]['message']['text'];","","","$answer = \"I don't understand. Ask me 'hi'.\";","if($messageText == \"hi\") {","    $answer = \"Hello\";","}","","$response = [","    'recipient' => [ 'id' => $senderId ],","    'message' => [ 'text' => $answer ]","];","$ch = curl_init('https://graph.facebook.com/v2.6/me/messages?access_token='.$accessToken);","curl_setopt($ch, CURLOPT_POST, 1);","curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($response));","curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);","curl_exec($ch);","curl_close($ch);",""],"id":1319}],[{"start":{"row":2,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["print_r($_GET[\"hub_challenge\"]);","// handle bot's anwser","$input = json_decode(file_get_contents('php://input'), true);","","$senderId = $input['entry'][0]['messaging'][0]['sender']['id'];","$messageText = $input['entry'][0]['messaging'][0]['message']['text'];","","","$answer = \"I don't understand. Ask me 'hi'.\";","if($messageText == \"hi\") {","    $answer = \"Hello\";","}","","$response = [","    'recipient' => [ 'id' => $senderId ],","    'message' => [ 'text' => $answer ]","];","$ch = curl_init('https://graph.facebook.com/v2.6/me/messages?access_token='.$accessToken);","curl_setopt($ch, CURLOPT_POST, 1);","curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($response));","curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);","curl_exec($ch);","curl_close($ch);",""],"id":1320},{"start":{"row":2,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["// parameters","$hubVerifyToken = 'abc*123';","$accessToken = \"EAARFZAgZCvAmcBAO4h5yJIptGW2MXZB5CJdJtVaQyXWmwcKClJpjVx5apkzZCZCmPCFQosfxElZAjWFTExAkDsrjvLDZAFv9ZCGNfDWUsEO7gClZAXtoBg9oAedb8iYoZA6ZC9c5x2sFkA4xG7qGfFOJK1lv9fmsHaXrY71ZCylYqjU3sQZDZD\";","","// check token at setup","if ($_REQUEST['hub_verify_token'] === $hubVerifyToken) {","  print_r($_REQUEST['hub_challenge']);"," print_r($_GET[\"hub_challenge\"]);","  exit;","  ","}","","// handle bot's anwser","$input = json_decode(file_get_contents('php://input'), true);","","$senderId = $input['entry'][0]['messaging'][0]['sender']['id'];","$messageText = $input['entry'][0]['messaging'][0]['message']['text'];","","","$answer = \"I don't understand. Ask me 'hi'.\";","if($messageText == \"hi\") {","    $answer = \"Hello\";","}","","$response = [","    'recipient' => [ 'id' => $senderId ],","    'message' => [ 'text' => $answer ]","];","$ch = curl_init('https://graph.facebook.com/v2.6/me/messages?access_token='.$accessToken);","curl_setopt($ch, CURLOPT_POST, 1);","curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($response));","curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);","curl_exec($ch);","curl_close($ch);",""]}],[{"start":{"row":21,"column":0},"end":{"row":21,"column":45},"action":"remove","lines":["$answer = \"I don't understand. Ask me 'hi'.\";"],"id":1321}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"insert","lines":["e"],"id":1322}],[{"start":{"row":25,"column":1},"end":{"row":25,"column":2},"action":"insert","lines":["l"],"id":1323}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"remove","lines":["el"],"id":1324},{"start":{"row":25,"column":0},"end":{"row":27,"column":1},"action":"insert","lines":["else {","    // code...","}"]}],[{"start":{"row":26,"column":4},"end":{"row":26,"column":14},"action":"remove","lines":["// code..."],"id":1325},{"start":{"row":26,"column":4},"end":{"row":26,"column":49},"action":"insert","lines":["$answer = \"I don't understand. Ask me 'hi'.\";"]}]]},"ace":{"folds":[],"scrolltop":89.3997802734375,"scrollleft":0,"selection":{"start":{"row":21,"column":0},"end":{"row":21,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1468415002053,"hash":"f5d406092d975c2dd6b208782999ba9250022644"}