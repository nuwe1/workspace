{"filter":false,"title":"sample.php","tooltip":"/sample.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":36,"column":54},"action":"insert","lines":["<?php","// parameters","$hubVerifyToken = 'abc*123';","$accessToken = \"EAARFZAgZCvAmcBAO4h5yJIptGW2MXZB5CJdJtVaQyXWmwcKClJpjVx5apkzZCZCmPCFQosfxElZAjWFTExAkDsrjvLDZAFv9ZCGNfDWUsEO7gClZAXtoBg9oAedb8iYoZA6ZC9c5x2sFkA4xG7qGfFOJK1lv9fmsHaXrY71ZCylYqjU3sQZDZD\";","","// check token at setup","if ($_REQUEST['hub_verify_token'] === $hubVerifyToken) {","  print_r($_REQUEST['hub_challenge']);"," print_r($_GET[\"hub_challenge\"]);","  exit;","  ","}","","// handle bot's anwser","$input = json_decode(file_get_contents('php://input'), true);","","$senderId = $input['entry'][0]['messaging'][0]['sender']['id'];","$messageText = $input['entry'][0]['messaging'][0]['message']['text'];","","","$answer = \"I don't understand. Ask me 'hi'.\";","if($messageText == \"hi\") {","    $answer = \"Hello\";","}","","$response = [","    'recipient' => [ 'id' => $senderId ],","    'message' => [ 'text' => $answer ]","];","$ch = curl_init('https://graph.facebook.com/v2.6/me/messages?access_token='.$accessToken);","curl_setopt($ch, CURLOPT_POST, 1);","curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($response));","curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);","curl_exec($ch);","curl_close($ch);","","//based on http://stackoverflow.com/questions/36803518"],"id":1}]]},"ace":{"folds":[],"scrolltop":103.79977416992188,"scrollleft":0,"selection":{"start":{"row":1,"column":0},"end":{"row":35,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1468412142634,"hash":"a319923397c19bf9e3f91a37f551ca4223b2372b"}