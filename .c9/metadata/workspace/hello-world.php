{"filter":false,"title":"hello-world.php","tooltip":"/hello-world.php","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":10,"column":7},"action":"remove","lines":["<html><body>","<?php","// A simple web site in Cloud9 that runs through Apache","// Press the 'Run' button on the top to start the web server,","// then click the URL that is emitted to the Output tab of the console","","echo 'Hello world from Cloud9!';","","?>","</body>","</html>"],"id":13}],[{"start":{"row":0,"column":0},"end":{"row":36,"column":54},"action":"insert","lines":["<?php","// parameters","$hubVerifyToken = 'abc*123';","$accessToken = \"EAARFZAgZCvAmcBAO4h5yJIptGW2MXZB5CJdJtVaQyXWmwcKClJpjVx5apkzZCZCmPCFQosfxElZAjWFTExAkDsrjvLDZAFv9ZCGNfDWUsEO7gClZAXtoBg9oAedb8iYoZA6ZC9c5x2sFkA4xG7qGfFOJK1lv9fmsHaXrY71ZCylYqjU3sQZDZD\";","","// check token at setup","if ($_REQUEST['hub_verify_token'] === $hubVerifyToken) {","  echo $_REQUEST['hub_challenge'];"," print_r($_GET[\"hub_challenge\"]);","  exit;","  ","}","","// handle bot's anwser","$input = json_decode(file_get_contents('php://input'), true);","","$senderId = $input['entry'][0]['messaging'][0]['sender']['id'];","$messageText = $input['entry'][0]['messaging'][0]['message']['text'];","","","$answer = \"I don't understand. Ask me 'hi'.\";","if($messageText == \"hi\") {","    $answer = \"Hello\";","}","","$response = [","    'recipient' => [ 'id' => $senderId ],","    'message' => [ 'text' => $answer ]","];","$ch = curl_init('https://graph.facebook.com/v2.6/me/messages?access_token='.$accessToken);","curl_setopt($ch, CURLOPT_POST, 1);","curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($response));","curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);","curl_exec($ch);","curl_close($ch);","","//based on http://stackoverflow.com/questions/36803518"],"id":14}],[{"start":{"row":7,"column":1},"end":{"row":7,"column":6},"action":"remove","lines":[" echo"],"id":15},{"start":{"row":7,"column":1},"end":{"row":7,"column":8},"action":"insert","lines":["print_r"]}],[{"start":{"row":7,"column":9},"end":{"row":7,"column":10},"action":"insert","lines":["("],"id":17}],[{"start":{"row":7,"column":36},"end":{"row":7,"column":37},"action":"insert","lines":[")"],"id":18}],[{"start":{"row":7,"column":8},"end":{"row":7,"column":9},"action":"remove","lines":[" "],"id":19}]]},"ace":{"folds":[],"scrolltop":49,"scrollleft":0,"selection":{"start":{"row":11,"column":1},"end":{"row":11,"column":1},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":2,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1468319430258,"hash":"9ebf42acac56627dd499636751b763a64843e295"}